{% extends 'base.html' %}{% load static %}
{% block title %}
    <title>{{ post.title }}</title>
{% endblock title %}
{% block home %}



    <!-- Mirrored from fixdevelopdemo.ir/theme/finder/demo/job-board-blog-single.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 17 Apr 2023 10:16:57 GMT -->
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
    <head>
        <meta charset="utf-8">
        <!-- SEO Meta Tags-->
        <meta name="description" content="Finder - Directory &amp; Listings Bootstrap Template">
        <meta name="keywords"
              content="bootstrap, business, directory, listings, e-commerce, car dealer, city guide, real estate, job board, user account, multipurpose, ui kit, html5, css3, javascript, gallery, slider, touch">
        <meta name="author" content="Createx Studio">
        <!-- Viewport-->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Favicon and Touch Icons-->
        <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
        <link rel="manifest" href="site.webmanifest">
        <link rel="mask-icon" color="#5bbad5" href="safari-pinned-tab.svg">
        <meta name="msapplication-TileColor" content="#766df4">
        <meta name="theme-color" content="#ffffff">
        <!-- Page loading styles-->
    </head>
    <main class="page-wrapper">
        <!-- Page container-->
        <div class="container mt-5 pt-5">
            <!-- Breadcrumb + Page title-->
            <nav class="mb-3 mb-md-4 pt-md-3" aria-label="Breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'homeView' %}">خانه</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'catgory' %}">اموزش ها</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ film.title }}</li>
                </ol>
            </nav>
            <h1 class="h2 pb-3 font-vazir">{{ film.title }}</h1><img class="rounded-3" src="{{ film.img.url }}"
                                                                     alt="{{ film.alt }}">
            <div class="row mt-4 pt-3">
                <!-- Post content-->
                <div class="col-lg-8">
                    <!-- Post meta-->
                    <div class="d-flex flex-wrap border-bottom pb-3 mb-4"><a
                            class="text-uppercase text-decoration-none border-end pe-3 me-3 mb-2"
                            href="{% url 'catgory' %}">رمان ها</a>
                        <div class="d-flex align-items-center border-end pe-3 me-3 mb-2"><i
                                class="fi-calendar-alt opacity-70 me-2"></i><span>{{ milad.miladtime }}</span></div>
                        <a class="nav-link-muted d-flex align-items-center mb-2" href="#comments" data-scroll><i
                                class="fi-chat-circle opacity-70 me-2"></i><span>{{ po }} نظر</span></a>
                    </div>

                    <!-- Video-->
                    <div class="py-4 mb-2">
                        <div class="position-relative">
                            <img class="rounded-3" src="{{ film.img.url }}" alt="{{ film.alt }}"></div>
                    </div>
                    <p class="m-0">{{ film.body | safe }}</p>
                    <p>
                        <button class="btn btn-primary mt-3" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseWidthExample" aria-expanded="false"
                                aria-controls="collapseWidthExample">
                            قسمت های اموزش
                        </button>
                    </p>
                    {% for foo in rom %}
                        <div style="">
                            <div class="collapse collapse-horizontal" id="collapseWidthExample">
                                <div class="card card-body">
                                    <div class="accordion accordion-flush" id="accordionFlushExample">
                                        <div class="accordion-item">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button collapsed" type="button"
                                                        data-bs-toggle="collapse"
                                                        data-bs-target="#flush-collapseOne{{ foo.id }}"
                                                        aria-expanded="false" aria-controls="flush-collapseOne">
                                                    {{ foo.title }}
                                                </button>
                                            </h2>
                                            <div id="flush-collapseOne{{ foo.id }}" class="accordion-collapse collapse"
                                                 data-bs-parent="#accordionFlushExample">
                                                <div class="accordion-body" style="direction: ltr">
                                                    <style>
                                                        /* ==========================================================================
                                                   #Custom HTML5 Video Player
                                                   ========================================================================== */

                                                        :root {
                                                            --youtube-red: #FE0900;
                                                        }

                                                        video {
                                                            width: 100%;
                                                            height: 100%;
                                                            border-radius: 4px;
                                                        }

                                                        .video-controls {
                                                            right: 0;
                                                            left: 0;
                                                            padding: 10px;
                                                            position: absolute;
                                                            bottom: 0;
                                                            transition: all 0.2s ease;
                                                            background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));
                                                        }

                                                        .video-controls.hide {
                                                            opacity: 0;
                                                            pointer-events: none;
                                                        }

                                                        .video-progress {
                                                            position: relative;
                                                            height: 8.4px;
                                                            margin-bottom: 10px;
                                                        }

                                                        progress {
                                                            -webkit-appearance: none;
                                                            -moz-appearance: none;
                                                            appearance: none;
                                                            border-radius: 2px;
                                                            width: 100%;
                                                            height: 8.4px;
                                                            pointer-events: none;
                                                            position: absolute;
                                                            top: 0;
                                                        }

                                                        progress::-webkit-progress-bar {
                                                            background-color: #474545;
                                                            border-radius: 2px;
                                                        }

                                                        progress::-webkit-progress-value {
                                                            background: var(--youtube-red);
                                                            border-radius: 2px;
                                                        }

                                                        progress::-moz-progress-bar {
                                                            border: 1px solid var(--youtube-red);
                                                            background: var(--youtube-red);
                                                        }

                                                        .seek {
                                                            position: absolute;
                                                            top: 0;
                                                            width: 100%;
                                                            cursor: pointer;
                                                            margin: 0;
                                                        }

                                                        .seek:hover + .seek-tooltip {
                                                            display: block;
                                                        }

                                                        .seek-tooltip {
                                                            display: none;
                                                            position: absolute;
                                                            top: -50px;
                                                            margin-left: -20px;
                                                            font-size: 12px;
                                                            padding: 3px;
                                                            content: attr(data-title);
                                                            font-weight: bold;
                                                            color: #fff;
                                                            background-color: rgba(0, 0, 0, 0.6);
                                                        }

                                                        .bottom-controls {
                                                            display: flex;
                                                            justify-content: space-between;
                                                            align-items: center;
                                                        }

                                                        .left-controls {
                                                            display: flex;
                                                            align-items: center;
                                                            color: #fff;
                                                        }

                                                        .volume-controls {
                                                            display: flex;
                                                            align-items: center;
                                                            margin-right: 10px;
                                                        }

                                                        .volume-controls input {
                                                            width: 100px;
                                                            opacity: 1;
                                                            transition: all 0.4s ease;
                                                        }

                                                        .volume-controls:hover input,
                                                        .volume-controls input:focus {
                                                            width: 100px;
                                                            opacity: 1;
                                                        }

                                                        button {
                                                            cursor: pointer;
                                                            position: relative;
                                                            margin-right: 7px;
                                                            font-size: 12px;
                                                            padding: 3px;
                                                            border: none;
                                                            outline: none;
                                                            background-color: transparent;
                                                        }

                                                        button * {
                                                            pointer-events: none;
                                                        }

                                                        button::before {
                                                            content: attr(data-title);
                                                            position: absolute;
                                                            display: none;
                                                            right: 0;
                                                            top: -50px;
                                                            background-color: rgba(0, 0, 0, 0.6);
                                                            color: #fff;
                                                            font-weight: bold;
                                                            padding: 4px 6px;
                                                            word-break: keep-all;
                                                            white-space: pre;
                                                        }

                                                        button:hover::before {
                                                            display: inline-block;
                                                        }

                                                        .fullscreen-button {
                                                            margin-right: 0;
                                                        }

                                                        .pip-button svg {
                                                            width: 26px;
                                                            height: 26px;
                                                        }

                                                        .playback-animation {
                                                            pointer-events: none;
                                                            position: absolute;
                                                            top: 50%;
                                                            left: 50%;
                                                            margin-left: -40px;
                                                            margin-top: -40px;
                                                            width: 80px;
                                                            height: 80px;
                                                            border-radius: 80px;
                                                            background-color: rgba(0, 0, 0, 0.6);
                                                            display: flex;
                                                            justify-content: center;
                                                            align-items: center;
                                                            opacity: 0;
                                                        }

                                                        input[type=range] {
                                                            -webkit-appearance: none;
                                                            -moz-appearance: none;
                                                            height: 8.4px;
                                                            background: transparent;
                                                            cursor: pointer;
                                                        }

                                                        input[type=range]:focus {
                                                            outline: none;
                                                        }

                                                        input[type=range]::-webkit-slider-runnable-track {
                                                            width: 100%;
                                                            cursor: pointer;
                                                            border-radius: 1.3px;
                                                            -webkit-appearance: none;
                                                            transition: all 0.4s ease;
                                                        }

                                                        input[type=range]::-webkit-slider-thumb {
                                                            height: 16px;
                                                            width: 16px;
                                                            border-radius: 16px;
                                                            background: var(--youtube-red);
                                                            cursor: pointer;
                                                            -webkit-appearance: none;
                                                            margin-left: -1px;
                                                        }

                                                        input[type=range]:focus::-webkit-slider-runnable-track {
                                                            background: transparent;
                                                        }

                                                        input[type=range].volume {
                                                            height: 5px;
                                                            background-color: #fff;
                                                        }

                                                        input[type=range].volume::-webkit-slider-runnable-track {
                                                            background-color: transparent;
                                                        }

                                                        input[type=range].volume::-webkit-slider-thumb {
                                                            margin-left: 0;
                                                            height: 14px;
                                                            width: 14px;
                                                            background: #fff;
                                                        }

                                                        input[type=range]::-moz-range-track {
                                                            width: 100%;
                                                            height: 8.4px;
                                                            cursor: pointer;
                                                            border: 1px solid transparent;
                                                            background: transparent;
                                                            border-radius: 1.3px;
                                                        }

                                                        input[type=range]::-moz-range-thumb {
                                                            height: 14px;
                                                            width: 14px;
                                                            border-radius: 50px;
                                                            border: 1px solid var(--youtube-red);
                                                            background: var(--youtube-red);
                                                            cursor: pointer;
                                                            margin-top: 5px;
                                                        }

                                                        input[type=range]:focus::-moz-range-track {
                                                            outline: none;
                                                        }

                                                        input[type=range].volume::-moz-range-thumb {
                                                            border: 1px solid #fff;
                                                            background: #fff;
                                                        }

                                                        .hidden {
                                                            display: none;
                                                        }

                                                        svg {
                                                            width: 28px;
                                                            height: 28px;
                                                            fill: #fff;
                                                            stroke: #fff;
                                                            cursor: pointer;
                                                        }
                                                    </style>
                                                    <div class="container">
                                                        <div class="video-container" id="video-container">
                                                            <div class="playback-animation" id="playback-animation">
                                                                <svg class="playback-icons">
                                                                    <use class="hidden" href="#play-icon"></use>
                                                                    <use href="#pause"></use>
                                                                </svg>
                                                            </div>

                                                            <video controls class="video" id="video" preload="metadata"
                                                                   poster="https://ako.storage.iran.liara.space/book.png">
                                                                <source src="{{ foo.link }}"
                                                                        type="video/mp4"></source>
                                                            </video>

                                                            <div class="video-controls hidden" id="video-controls">
                                                                <div class="video-progress">
                                                                    <progress id="progress-bar" value="0"
                                                                              min="0"></progress>
                                                                    <input class="seek" id="seek" value="0" min="0"
                                                                           type="range" step="1">
                                                                    <div class="seek-tooltip" id="seek-tooltip">00:00
                                                                    </div>
                                                                </div>

                                                                <div class="bottom-controls">
                                                                    <div class="left-controls">
                                                                        <button data-title="Play (k)" id="play">
                                                                            <svg class="playback-icons">
                                                                                <use href="#play-icon"></use>
                                                                                <use class="hidden" href="#pause"></use>
                                                                            </svg>
                                                                        </button>

                                                                        <div class="volume-controls">
                                                                            <button data-title="Mute (m)"
                                                                                    class="volume-button"
                                                                                    id="volume-button">
                                                                                <svg>
                                                                                    <use class="hidden"
                                                                                         href="#volume-mute"></use>
                                                                                    <use class="hidden"
                                                                                         href="#volume-low"></use>
                                                                                    <use href="#volume-high"></use>
                                                                                </svg>
                                                                            </button>

                                                                            <input class="volume" id="volume" value="1"
                                                                                   data-mute="0.5" type="range" max="1"
                                                                                   min="0" step="0.01">
                                                                        </div>

                                                                        <div class="time">
                                                                            <time id="time-elapsed">00:00</time>
                                                                            <span> / </span>
                                                                            <time id="duration">00:00</time>
                                                                        </div>
                                                                    </div>

                                                                    <div class="right-controls">
                                                                        <button data-title="PIP (p)" class="pip-button"
                                                                                id="pip-button">
                                                                            <svg>
                                                                                <use href="#pip"></use>
                                                                            </svg>
                                                                        </button>
                                                                        <button data-title="Full screen (f)"
                                                                                class="fullscreen-button"
                                                                                id="fullscreen-button">
                                                                            <svg>
                                                                                <use href="#fullscreen"></use>
                                                                                <use href="#fullscreen-exit"
                                                                                     class="hidden"></use>
                                                                            </svg>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <svg style="display: none">
                                                        <defs>
                                                            <symbol id="pause" viewBox="0 0 24 24">
                                                                <path d="M14.016 5.016h3.984v13.969h-3.984v-13.969zM6 18.984v-13.969h3.984v13.969h-3.984z"></path>
                                                            </symbol>

                                                            <symbol id="play-icon" viewBox="0 0 24 24">
                                                                <path d="M8.016 5.016l10.969 6.984-10.969 6.984v-13.969z"></path>
                                                            </symbol>

                                                            <symbol id="volume-high" viewBox="0 0 24 24">
                                                                <path d="M14.016 3.234q3.047 0.656 5.016 3.117t1.969 5.648-1.969 5.648-5.016 3.117v-2.063q2.203-0.656 3.586-2.484t1.383-4.219-1.383-4.219-3.586-2.484v-2.063zM16.5 12q0 2.813-2.484 4.031v-8.063q1.031 0.516 1.758 1.688t0.727 2.344zM3 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6z"></path>
                                                            </symbol>

                                                            <symbol id="volume-low" viewBox="0 0 24 24">
                                                                <path d="M5.016 9h3.984l5.016-5.016v16.031l-5.016-5.016h-3.984v-6zM18.516 12q0 2.766-2.531 4.031v-8.063q1.031 0.516 1.781 1.711t0.75 2.32z"></path>
                                                            </symbol>

                                                            <symbol id="volume-mute" viewBox="0 0 24 24">
                                                                <path d="M12 3.984v4.219l-2.109-2.109zM4.266 3l16.734 16.734-1.266 1.266-2.063-2.063q-1.547 1.313-3.656 1.828v-2.063q1.172-0.328 2.25-1.172l-4.266-4.266v6.75l-5.016-5.016h-3.984v-6h4.734l-4.734-4.734zM18.984 12q0-2.391-1.383-4.219t-3.586-2.484v-2.063q3.047 0.656 5.016 3.117t1.969 5.648q0 2.203-1.031 4.172l-1.5-1.547q0.516-1.266 0.516-2.625zM16.5 12q0 0.422-0.047 0.609l-2.438-2.438v-2.203q1.031 0.516 1.758 1.688t0.727 2.344z"></path>
                                                            </symbol>

                                                            <symbol id="fullscreen" viewBox="0 0 24 24">
                                                                <path d="M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z"></path>
                                                            </symbol>

                                                            <symbol id="fullscreen-exit" viewBox="0 0 24 24">
                                                                <path d="M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z"></path>
                                                            </symbol>

                                                            <symbol id="pip" viewBox="0 0 24 24">
                                                                <path d="M21 19.031v-14.063h-18v14.063h18zM23.016 18.984q0 0.797-0.609 1.406t-1.406 0.609h-18q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h18q0.797 0 1.406 0.586t0.609 1.383v14.016zM18.984 11.016v6h-7.969v-6h7.969z"></path>
                                                            </symbol>
                                                        </defs>
                                                    </svg>
                                                    <script>
                                                        // Select elements here
                                                        const video = document.getElementById('video');
                                                        const videoControls = document.getElementById('video-controls');
                                                        const playButton = document.getElementById('play');
                                                        const playbackIcons = document.querySelectorAll('.playback-icons use');
                                                        const timeElapsed = document.getElementById('time-elapsed');
                                                        const duration = document.getElementById('duration');
                                                        const progressBar = document.getElementById('progress-bar');
                                                        const seek = document.getElementById('seek');
                                                        const seekTooltip = document.getElementById('seek-tooltip');
                                                        const volumeButton = document.getElementById('volume-button');
                                                        const volumeIcons = document.querySelectorAll('.volume-button use');
                                                        const volumeMute = document.querySelector('use[href="#volume-mute"]');
                                                        const volumeLow = document.querySelector('use[href="#volume-low"]');
                                                        const volumeHigh = document.querySelector('use[href="#volume-high"]');
                                                        const volume = document.getElementById('volume');
                                                        const playbackAnimation = document.getElementById('playback-animation');
                                                        const fullscreenButton = document.getElementById('fullscreen-button');
                                                        const videoContainer = document.getElementById('video-container');
                                                        const fullscreenIcons = fullscreenButton.querySelectorAll('use');
                                                        const pipButton = document.getElementById('pip-button');

                                                        const videoWorks = !!document.createElement('video').canPlayType;
                                                        if (videoWorks) {
                                                            video.controls = false;
                                                            videoControls.classList.remove('hidden');
                                                        }

                                                        // Add functions here

                                                        // togglePlay toggles the playback state of the video.
                                                        // If the video playback is paused or ended, the video is played
                                                        // otherwise, the video is paused
                                                        function togglePlay() {
                                                            if (video.paused || video.ended) {
                                                                video.play();
                                                            } else {
                                                                video.pause();
                                                            }
                                                        }

                                                        // updatePlayButton updates the playback icon and tooltip
                                                        // depending on the playback state
                                                        function updatePlayButton() {
                                                            playbackIcons.forEach((icon) => icon.classList.toggle('hidden'));

                                                            if (video.paused) {
                                                                playButton.setAttribute('data-title', 'Play (k)');
                                                            } else {
                                                                playButton.setAttribute('data-title', 'Pause (k)');
                                                            }
                                                        }

                                                        // formatTime takes a time length in seconds and returns the time in
                                                        // minutes and seconds
                                                        function formatTime(timeInSeconds) {
                                                            const result = new Date(timeInSeconds * 1000).toISOString().substr(11, 8);

                                                            return {
                                                                minutes: result.substr(3, 2),
                                                                seconds: result.substr(6, 2),
                                                            };
                                                        }

                                                        // initializeVideo sets the video duration, and maximum value of the
                                                        // progressBar
                                                        function initializeVideo() {
                                                            const videoDuration = Math.round(video.duration);
                                                            seek.setAttribute('max', videoDuration);
                                                            progressBar.setAttribute('max', videoDuration);
                                                            const time = formatTime(videoDuration);
                                                            duration.innerText = `${time.minutes}:${time.seconds}`;
                                                            duration.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
                                                        }

                                                        // updateTimeElapsed indicates how far through the video
                                                        // the current playback is by updating the timeElapsed element
                                                        function updateTimeElapsed() {
                                                            const time = formatTime(Math.round(video.currentTime));
                                                            timeElapsed.innerText = `${time.minutes}:${time.seconds}`;
                                                            timeElapsed.setAttribute('datetime', `${time.minutes}m ${time.seconds}s`);
                                                        }

                                                        // updateProgress indicates how far through the video
                                                        // the current playback is by updating the progress bar
                                                        function updateProgress() {
                                                            seek.value = Math.floor(video.currentTime);
                                                            progressBar.value = Math.floor(video.currentTime);
                                                        }

                                                        // updateSeekTooltip uses the position of the mouse on the progress bar to
                                                        // roughly work out what point in the video the user will skip to if
                                                        // the progress bar is clicked at that point
                                                        function updateSeekTooltip(event) {
                                                            const skipTo = Math.round(
                                                                (event.offsetX / event.target.clientWidth) *
                                                                parseInt(event.target.getAttribute('max'), 10)
                                                            );
                                                            seek.setAttribute('data-seek', skipTo);
                                                            const t = formatTime(skipTo);
                                                            seekTooltip.textContent = `${t.minutes}:${t.seconds}`;
                                                            const rect = video.getBoundingClientRect();
                                                            seekTooltip.style.left = `${event.pageX - rect.left}px`;
                                                        }

                                                        // skipAhead jumps to a different point in the video when the progress bar
                                                        // is clicked
                                                        function skipAhead(event) {
                                                            const skipTo = event.target.dataset.seek ?
                                                                event.target.dataset.seek :
                                                                event.target.value;
                                                            video.currentTime = skipTo;
                                                            progressBar.value = skipTo;
                                                            seek.value = skipTo;
                                                        }

                                                        // updateVolume updates the video's volume
                                                        // and disables the muted state if active
                                                        function updateVolume() {
                                                            if (video.muted) {
                                                                video.muted = false;
                                                            }

                                                            video.volume = volume.value;
                                                        }

                                                        // updateVolumeIcon updates the volume icon so that it correctly reflects
                                                        // the volume of the video
                                                        function updateVolumeIcon() {
                                                            volumeIcons.forEach((icon) => {
                                                                icon.classList.add('hidden');
                                                            });

                                                            volumeButton.setAttribute('data-title', 'Mute (m)');

                                                            if (video.muted || video.volume === 0) {
                                                                volumeMute.classList.remove('hidden');
                                                                volumeButton.setAttribute('data-title', 'Unmute (m)');
                                                            } else if (video.volume > 0 && video.volume <= 0.5) {
                                                                volumeLow.classList.remove('hidden');
                                                            } else {
                                                                volumeHigh.classList.remove('hidden');
                                                            }
                                                        }

                                                        // toggleMute mutes or unmutes the video when executed
                                                        // When the video is unmuted, the volume is returned to the value
                                                        // it was set to before the video was muted
                                                        function toggleMute() {
                                                            video.muted = !video.muted;

                                                            if (video.muted) {
                                                                volume.setAttribute('data-volume', volume.value);
                                                                volume.value = 0;
                                                            } else {
                                                                volume.value = volume.dataset.volume;
                                                            }
                                                        }

                                                        // animatePlayback displays an animation when
                                                        // the video is played or paused
                                                        function animatePlayback() {
                                                            playbackAnimation.animate(
                                                                [{
                                                                    opacity: 1,
                                                                    transform: 'scale(1)',
                                                                }, {
                                                                    opacity: 0,
                                                                    transform: 'scale(1.3)',
                                                                },], {
                                                                    duration: 500,
                                                                }
                                                            );
                                                        }

                                                        // toggleFullScreen toggles the full screen state of the video
                                                        // If the browser is currently in fullscreen mode,
                                                        // then it should exit and vice versa.
                                                        function toggleFullScreen() {
                                                            if (document.fullscreenElement) {
                                                                document.exitFullscreen();
                                                            } else if (document.webkitFullscreenElement) {
                                                                // Need this to support Safari
                                                                document.webkitExitFullscreen();
                                                            } else if (videoContainer.webkitRequestFullscreen) {
                                                                // Need this to support Safari
                                                                videoContainer.webkitRequestFullscreen();
                                                            } else {
                                                                videoContainer.requestFullscreen();
                                                            }
                                                        }

                                                        // updateFullscreenButton changes the icon of the full screen button
                                                        // and tooltip to reflect the current full screen state of the video
                                                        function updateFullscreenButton() {
                                                            fullscreenIcons.forEach((icon) => icon.classList.toggle('hidden'));

                                                            if (document.fullscreenElement) {
                                                                fullscreenButton.setAttribute('data-title', 'Exit full screen (f)');
                                                            } else {
                                                                fullscreenButton.setAttribute('data-title', 'Full screen (f)');
                                                            }
                                                        }

                                                        // togglePip toggles Picture-in-Picture mode on the video
                                                        async function togglePip() {
                                                            try {
                                                                if (video !== document.pictureInPictureElement) {
                                                                    pipButton.disabled = true;
                                                                    await video.requestPictureInPicture();
                                                                } else {
                                                                    await document.exitPictureInPicture();
                                                                }
                                                            } catch (error) {
                                                                console.error(error);
                                                            } finally {
                                                                pipButton.disabled = false;
                                                            }
                                                        }

                                                        // hideControls hides the video controls when not in use
                                                        // if the video is paused, the controls must remain visible
                                                        function hideControls() {
                                                            if (video.paused) {
                                                                return;
                                                            }

                                                            videoControls.classList.add('hide');
                                                        }

                                                        // showControls displays the video controls
                                                        function showControls() {
                                                            videoControls.classList.remove('hide');
                                                        }

                                                        // keyboardShortcuts executes the relevant functions for
                                                        // each supported shortcut key
                                                        function keyboardShortcuts(event) {
                                                            const {
                                                                key
                                                            } = event;
                                                            switch (key) {
                                                                case 'k':
                                                                    togglePlay();
                                                                    animatePlayback();
                                                                    if (video.paused) {
                                                                        showControls();
                                                                    } else {
                                                                        setTimeout(() => {
                                                                            hideControls();
                                                                        }, 2000);
                                                                    }
                                                                    break;
                                                                case 'm':
                                                                    toggleMute();
                                                                    break;
                                                                case 'f':
                                                                    toggleFullScreen();
                                                                    break;
                                                                case 'p':
                                                                    togglePip();
                                                                    break;
                                                            }
                                                        }

                                                        // Add eventlisteners here
                                                        playButton.addEventListener('click', togglePlay);
                                                        video.addEventListener('play', updatePlayButton);
                                                        video.addEventListener('pause', updatePlayButton);
                                                        video.addEventListener('loadedmetadata', initializeVideo);
                                                        video.addEventListener('timeupdate', updateTimeElapsed);
                                                        video.addEventListener('timeupdate', updateProgress);
                                                        video.addEventListener('volumechange', updateVolumeIcon);
                                                        video.addEventListener('click', togglePlay);
                                                        video.addEventListener('click', animatePlayback);
                                                        video.addEventListener('mouseenter', showControls);
                                                        video.addEventListener('mouseleave', hideControls);
                                                        videoControls.addEventListener('mouseenter', showControls);
                                                        videoControls.addEventListener('mouseleave', hideControls);
                                                        seek.addEventListener('mousemove', updateSeekTooltip);
                                                        seek.addEventListener('input', skipAhead);
                                                        volume.addEventListener('input', updateVolume);
                                                        volumeButton.addEventListener('click', toggleMute);
                                                        fullscreenButton.addEventListener('click', toggleFullScreen);
                                                        videoContainer.addEventListener('fullscreenchange', updateFullscreenButton);
                                                        pipButton.addEventListener('click', togglePip);

                                                        document.addEventListener('DOMContentLoaded', () => {
                                                            if (!('pictureInPictureEnabled' in document)) {
                                                                pipButton.classList.add('hidden');
                                                            }
                                                        });
                                                        document.addEventListener('keyup', keyboardShortcuts);
                                                        document.onkeydown = function (e) {
                                                            if (e.key == 'F12') {
                                                                return false;
                                                            }
                                                            if (e.ctrlKey && e.shiftKey && e.key == 'I') {
                                                                return false;
                                                            }
                                                            if (e.ctrlKey && e.shiftKey && e.key == 'C') {
                                                                return false;
                                                            }
                                                            if (e.ctrlKey && e.shiftKey && e.key == 'J') {
                                                                return false;
                                                            }
                                                            if (e.ctrlKey && e.shiftKey && e.key == 'U') {
                                                                return false;
                                                            }
                                                        }

                                                        document.addEventListener('contextmenu', function (e) {
                                                            e.preventDefault();
                                                        });
                                                    </script>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    {% endfor %}
                    <hr class="mb-2">

                    <!-- Comments-->
                    <div class="mb-4 mb-md-5" id="comments">
                        <h3 class="mb-4 pb-2 font-vazir">{{ po }} نظر ثبت شده</h3>
                        <!-- Comment-->
                        {% for comman in film.comments.all %}
                            {% if comman.parent == None %}
                                <div class="pb-4 pt-2 mb-4">
                                <p>{{ comman.text }}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center ps-2">{% if comman.user.img %}
                                        <img class="rounded-circle me-1"
                                             src="{{ comman.user.img.url }}"
                                             width="48"
                                             alt="Avatar">
                                    {% else %}
                                        <img class="rounded-circle me-1"
                                             src="https://ako.storage.iran.liara.space/userAvatar.png"
                                             width="48"
                                             alt="Avatar">

                                    {% endif %}
                                        <div class="pe-2">
                                            {% if comman.user_admin == True %}

                                                <h6 class="fs-base mb-0">{{ comman.name }}<span
                                                        class="badge bg-info rounded-pill fs-xs ms-2">admin</span></h6>
                                                <span
                                                        class="text-muted fs-sm">{{ comman.created_ad }}</span>

                                            {% else %}

                                                <h6 class="fs-base mb-0">{{ comman.name }}</h6><span
                                                    class="text-muted fs-sm">{{ comman.created_ad }}</span>

                                            {% endif %}
                                        </div>
                                    </div>
                                    <button class="btn btn-link btn-sm" onclick="set({{ comman.id }})" type="button"><i
                                            class="fi-reply fs-lg me-2"></i><span class="fw-normal">پاسخ</span></button>
                                </div>
                            {% endif %}
                        {% for replay in comman.riplay.all %}
                            <div class="border-start border-4 pe-4 me-4 mt-4">
                                <p>{{ replay.text }}</p>
                                <div class="d-flex align-items-center ps-2">
                                    {% if replay.user.img %}
                                        <img class="rounded-circle me-1"
                                             src="{{ replay.user.img.url }}"
                                             width="48"
                                             alt="Avatar">
                                    {% else %}
                                        <img class="rounded-circle me-1"
                                             src="https://ako.storage.iran.liara.space/userAvatar.png"
                                             width="48"
                                             alt="Avatar">

                                    {% endif %}
                                    <div class="pe-2">
                                        {% if replay.user_admin == True %}

                                            <h6 class="fs-base mb-0">{{ replay.name }}<span
                                                    class="badge bg-info rounded-pill fs-xs ms-2">admin</span></h6><span
                                                class="text-muted fs-sm"></span>

                                        {% else %}

                                            <h6 class="fs-base mb-0">{{ replay.name }}</h6>

                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            </div>
                        {% endfor %}
                        {% endfor %}


                    </div>
                </div>

            </div>
        </div>
        <!-- Comment form-->
        <div class=" py-5">
            <div class="container py-md-2 py-lg-4">
                <div class="row justify-content-center">
                    <div class="col-md-10 col-xl-8">
                        <h3 class="text-center mb-4 pb-sm-2 font-vazir">ثبت نظر برای این رمان</h3>
                        <form class="needs-validation row gy-md-4 gy-3 pb-sm-2" method="post" novalidate>
                            {% csrf_token %}
                            <h2 id="bb2" style="color: #c57d25"></h2>
                            <input type="hidden" id="bb" name="parent" value="">
                            <div class="col-12 mb-2">
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label" for="comment-name">نام و نام خانوادگی</label>
                                <input class="form-control form-control-lg" name="name" type="text"
                                       id="comment-name"
                                       placeholder="نام شما" required>
                                <div class="invalid-feedback">نام خود را وارد کنید</div>
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label" for="comment-email">پست الکترونیکی</label>
                                <input class="form-control form-control-lg" type="email" id="comment-email"
                                       placeholder="ایمیل شما" required>
                                <div class="invalid-feedback">یک ایمیل معتبر وارد کنید</div>
                            </div>
                            <div class="col-12">
                                <label class="form-label" for="comment-text">متن نظر</label>
                                <textarea class="form-control form-control-lg" id="comment-text" name="text"
                                          rows="4"
                                          placeholder="متن نظر شما..." required></textarea>
                                <div class="invalid-feedback">متن نظر خود را تایپ کنید</div>
                            </div>

                            <div class="col-12 text-center pt-2">
                                {% if request.user.is_authenticated %}
                                    {% if request.user.blok == False %}
                                        <button class="btn btn-lg btn-primary rounded-pill" type="submit">ثبت نظر
                                        </button>
                                    {% else %}
                                        <p class="pt-5">شما از گذاشتن کامنت محروم شدی</p>
                                    {% endif %}
                                {% else %}
                                    <a href="{% url 'acoont:register' %}">
                                        <button class="btn btn-lg btn-primary rounded-pill" type="button">ثبت نظر
                                        </button>
                                    </a>
                                {% endif %}

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </main>

    <!-- Filters sidebar toggle button (mobile)-->

    <!-- Vendor scrits: js libraries and plugins-->
    <script>
        function set(id) {
            document.getElementById('bb').value = id;
            document.getElementById('bb2').innerHTML = 'ریپلای شد';
            window.location.href = '#exampleInputEmail1';
            var MySection = document.getElementById("bb2");
            MySection.scrollIntoView({block: 'start', behavior: 'smooth', inline: 'start'});

        }

    </script>
{% endblock home %}